# -*- coding: utf-8 -*-

import tkinter as tk

def demander_texte(titre="Entrez un texte", message=None):
    """
    Ouvre une fenêtre avec le titre "titre" et attend une chaine de caractères.
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    - titre est une chaine de caractères. Le titre de la fenetre
    - message est chaine de caractères. Si présente, on ajoute un champ de texte.
    """
    def sauver_valeur(event=None):#la fonction sauve la valeur dans value et ferme la fenetre
        value.set(entree.get())
        fenetre.destroy()

    fenetre = tk.Tk()
    fenetre.title(titre)

    # Si message est entré, on ajoute un champ message.
    # permet par exemple l'affichage d'érreurs.
    if message is not None:
        label = tk.Label(fenetre, text = message)
        label.pack()

    value = tk.StringVar()

    entree = tk.Entry(fenetre, textvariable=value, width=50)
    entree.pack()
    entree.bind('<Key-Return>', sauver_valeur)
    
    bouton=tk.Button(fenetre,text='Valider',command=sauver_valeur)
    bouton.pack()

    fenetre.mainloop()
    return value.get()

def demander_reel(titre="Entrez un nombre réel"):
    """Ouvre une fenetre et attend un nombre réel.
    Si ce n'est pas un nombre réel, on repose la question en ajoutant un message d'erreur."""
    message = None
    while True:
        texte = demander_texte(titre, message)
        try:
            reel = float(texte)
        except ValueError:
            message = "La donnée est incorrecte."
            continue
        else:
            break
    return reel

